# Площадка Услуг - УслугиРядом

Платформа для поиска и предоставления услуг с интеграцией оплаты через ЮKassa.

## Возможности

- ✅ Регистрация и авторизация пользователей
- ✅ База данных для хранения пользователей и платежей
- ✅ Интеграция с ЮKassa для приема платежей
- ✅ Адаптивный дизайн для всех устройств
- ✅ Яндекс.Метрика для аналитики

## Установка и запуск

### 1. Установка зависимостей

```bash
npm install
```

### 2. Настройка переменных окружения

Создайте файл `.env` на основе `.env.example`:

```bash
cp .env.example .env
```

Заполните необходимые переменные:

```env
PORT=3000
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
YOOKASSA_SHOP_ID=your_shop_id
YOOKASSA_SECRET_KEY=your_secret_key
```

### 3. Получение ключей ЮKassa

1. Зарегистрируйтесь на [ЮKassa](https://yookassa.ru/)
2. Создайте магазин в личном кабинете
3. Получите Shop ID и Secret Key
4. Добавьте их в файл `.env`

### 4. Запуск сервера

**Режим разработки:**
```bash
npm run dev
```

**Продакшн режим:**
```bash
npm start
```

Сервер будет доступен по адресу: `http://localhost:3000`

## Структура проекта

```
├── server.js              # Основной серверный файл
├── package.json           # Зависимости проекта
├── database.db            # SQLite база данных (создается автоматически)
├── index.html             # Главная страница
├── login.html             # Страница входа
├── register.html          # Страница регистрации
├── payment-success.html   # Страница успешной оплаты
├── auth.js                # Клиентская логика авторизации
├── payment.js             # Клиентская логика оплаты
├── smooth-scroll.js       # Плавная прокрутка
└── style.css              # Стили сайта
```

## API Endpoints

### Авторизация

- `POST /api/register` - Регистрация нового пользователя
- `POST /api/login` - Вход в систему
- `GET /api/me` - Получение информации о текущем пользователе

### Платежи

- `POST /api/create-payment` - Создание платежа через ЮKassa
- `GET /api/payment-status/:paymentId` - Проверка статуса платежа
- `GET /api/payments` - История платежей пользователя

## База данных

Проект использует SQLite для хранения данных. База данных создается автоматически при первом запуске.

### Таблицы:

- **users** - Пользователи (id, name, email, password, created_at)
- **payments** - Платежи (id, user_id, payment_id, amount, status, yookassa_payment_id, created_at)
- **service_requests** - Запросы на услуги (id, user_id, service_type, description, status, payment_id, created_at)

## Безопасность

⚠️ **Важно для продакшена:**

1. Измените `JWT_SECRET` на случайную строку
2. Используйте HTTPS для всех соединений
3. Настройте CORS для вашего домена
4. Регулярно обновляйте зависимости
5. Используйте переменные окружения для секретных ключей

## Развертывание

### Heroku

1. Создайте приложение на Heroku
2. Добавьте переменные окружения в настройках
3. Запушите код и деплойте

### VPS/Сервер

1. Установите Node.js на сервере
2. Склонируйте репозиторий
3. Установите зависимости: `npm install --production`
4. Настройте `.env` файл
5. Запустите через PM2: `pm2 start server.js`

## Лицензия

ISC

